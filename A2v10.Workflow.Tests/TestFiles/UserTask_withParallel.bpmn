<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:wf="clr-namespace:A2v10.Workflow;assembly=A2v10.Workflow" id="sid-38422fae-e03e-43a3-bef4-bd33b32041b2" targetNamespace="http://bpmn.io/bpmn" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="7.5.0"><process id="Process_1" isExecutable="true"><extensionElements><wf:Variables><wf:Variable Name="res" Type="String" Dir="Out" External="true" Value="" /><wf:Variable Name="sumSaldo" Type="Number" Dir="Local" Value="" /><wf:Variable Name="i" Type="BigInt" Dir="Local" Value="0" /></wf:Variables></extensionElements><startEvent id="StartEvent_1y45yut" name="start"><outgoing>SequenceFlow_0h21x7r</outgoing></startEvent><endEvent id="EndEvent_0sk8619"><incoming>Flow_1wshq6n</incoming></endEvent><sequenceFlow id="Flow_0z25uyc" sourceRef="EnterSaldo" targetRef="Gateway_1pgjke1" /><userTask id="EnterSaldo" name="Ввод задолженности"><extensionElements><wf:Script>sumSaldo = reply.Answer;</wf:Script></extensionElements><incoming>Flow_071w3nz</incoming><outgoing>Flow_0z25uyc</outgoing></userTask><sequenceFlow id="Flow_1wshq6n" sourceRef="Result" targetRef="EndEvent_0sk8619" /><scriptTask id="Result" name="Результат"><extensionElements><wf:Script /></extensionElements><incoming>Flow_014hs7c</incoming><outgoing>Flow_1wshq6n</outgoing><script>res = i.toString();</script></scriptTask><exclusiveGateway id="Gateway_0d2s6pw"><incoming>Flow_0v13tb0</incoming><incoming>Flow_0m3qvjv</incoming><outgoing>Flow_071w3nz</outgoing></exclusiveGateway><exclusiveGateway id="Gateway_1pgjke1" default="Flow_0mjhkzu"><incoming>Flow_0z25uyc</incoming><outgoing>Flow_0mjhkzu</outgoing><outgoing>Flow_0v13tb0</outgoing></exclusiveGateway><sequenceFlow id="Flow_0mjhkzu" sourceRef="Gateway_1pgjke1" targetRef="Gateway_1g7njr2" /><sequenceFlow id="Flow_0v13tb0" sourceRef="Gateway_1pgjke1" targetRef="Gateway_0d2s6pw"><conditionExpression xsi:type="tFormalExpression">sumSaldo &gt; 0</conditionExpression></sequenceFlow><sequenceFlow id="Flow_071w3nz" sourceRef="Gateway_0d2s6pw" targetRef="EnterSaldo" /><parallelGateway id="Gateway_1n4z68j"><incoming>SequenceFlow_0h21x7r</incoming><outgoing>Flow_0m3qvjv</outgoing><outgoing>Flow_0rrwfhi</outgoing></parallelGateway><sequenceFlow id="Flow_0m3qvjv" sourceRef="Gateway_1n4z68j" targetRef="Gateway_0d2s6pw" /><sequenceFlow id="SequenceFlow_0h21x7r" sourceRef="StartEvent_1y45yut" targetRef="Gateway_1n4z68j" /><sequenceFlow id="Flow_0rrwfhi" sourceRef="Gateway_1n4z68j" targetRef="Gateway_1fwl3ca" /><scriptTask id="ReturnSaldo" name="Получение задолженности из базы"><incoming>Flow_0a7uqfw</incoming><outgoing>Flow_0iip3cs</outgoing><script>const db = new Database();
let model = db.loadModel('bnpl.[Contract.Saldo]', {UserId: 0});


sumSaldo = model.Contract.Saldo;

</script></scriptTask><sequenceFlow id="Flow_0iip3cs" sourceRef="ReturnSaldo" targetRef="Event_04tyeib" /><intermediateCatchEvent id="Event_04tyeib"><incoming>Flow_0iip3cs</incoming><outgoing>Flow_1mfwqzd</outgoing><timerEventDefinition id="TimerEventDefinition_1nfjl77"><timeDuration xsi:type="tFormalExpression">00:01:00</timeDuration></timerEventDefinition></intermediateCatchEvent><exclusiveGateway id="Gateway_0y92pay" default="Flow_0kej2j6"><incoming>Flow_1mfwqzd</incoming><outgoing>Flow_1igym4c</outgoing><outgoing>Flow_0kej2j6</outgoing></exclusiveGateway><sequenceFlow id="Flow_1mfwqzd" sourceRef="Event_04tyeib" targetRef="Gateway_0y92pay" /><exclusiveGateway id="Gateway_1fwl3ca"><incoming>Flow_0rrwfhi</incoming><incoming>Flow_1igym4c</incoming><outgoing>Flow_1gantfx</outgoing></exclusiveGateway><sequenceFlow id="Flow_1gantfx" sourceRef="Gateway_1fwl3ca" targetRef="Activity_1ftj738" /><sequenceFlow id="Flow_1igym4c" sourceRef="Gateway_0y92pay" targetRef="Gateway_1fwl3ca"><conditionExpression xsi:type="tFormalExpression">sumSaldo &gt; 0</conditionExpression></sequenceFlow><sequenceFlow id="Flow_0kej2j6" sourceRef="Gateway_0y92pay" targetRef="Gateway_1g7njr2" /><scriptTask id="Activity_1ftj738" name="i++"><incoming>Flow_1gantfx</incoming><outgoing>Flow_1fomv8u</outgoing><script>i += 1;</script></scriptTask><sequenceFlow id="Flow_1fomv8u" sourceRef="Activity_1ftj738" targetRef="Activity_1yfnagg" /><boundaryEvent id="Event_1sw7467" attachedToRef="EnterSaldo"><outgoing>Flow_0qe4uho</outgoing><timerEventDefinition id="TimerEventDefinition_0bi2map"><timeDuration xsi:type="tFormalExpression">00:10:00</timeDuration></timerEventDefinition></boundaryEvent><endEvent id="Event_13ekgcb"><incoming>Flow_0qe4uho</incoming></endEvent><sequenceFlow id="Flow_0qe4uho" sourceRef="Event_1sw7467" targetRef="Event_13ekgcb" /><scriptTask id="Activity_1yfnagg" name="Результат"><extensionElements><wf:Script /></extensionElements><incoming>Flow_1fomv8u</incoming><outgoing>Flow_0a7uqfw</outgoing><script>res = i.toString();</script></scriptTask><sequenceFlow id="Flow_0a7uqfw" sourceRef="Activity_1yfnagg" targetRef="ReturnSaldo" /><exclusiveGateway id="Gateway_1g7njr2"><incoming>Flow_0mjhkzu</incoming><incoming>Flow_0kej2j6</incoming><outgoing>Flow_014hs7c</outgoing></exclusiveGateway><sequenceFlow id="Flow_014hs7c" sourceRef="Gateway_1g7njr2" targetRef="Result" /></process><bpmndi:BPMNDiagram id="BpmnDiagram_1"><bpmndi:BPMNPlane id="BpmnPlane_1" bpmnElement="Process_1"><bpmndi:BPMNEdge id="Flow_0rrwfhi_di" bpmnElement="Flow_0rrwfhi"><omgdi:waypoint x="60" y="275" /><omgdi:waypoint x="60" y="510" /><omgdi:waypoint x="145" y="510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="SequenceFlow_0h21x7r_di" bpmnElement="SequenceFlow_0h21x7r"><omgdi:waypoint x="-2" y="250" /><omgdi:waypoint x="35" y="250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0m3qvjv_di" bpmnElement="Flow_0m3qvjv"><omgdi:waypoint x="85" y="250" /><omgdi:waypoint x="145" y="250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_071w3nz_di" bpmnElement="Flow_071w3nz"><omgdi:waypoint x="195" y="250" /><omgdi:waypoint x="250" y="250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0v13tb0_di" bpmnElement="Flow_0v13tb0"><omgdi:waypoint x="600" y="225" /><omgdi:waypoint x="600" y="160" /><omgdi:waypoint x="170" y="160" /><omgdi:waypoint x="170" y="225" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0z25uyc_di" bpmnElement="Flow_0z25uyc"><omgdi:waypoint x="350" y="250" /><omgdi:waypoint x="575" y="250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0qe4uho_di" bpmnElement="Flow_0qe4uho"><omgdi:waypoint x="290" y="308" /><omgdi:waypoint x="290" y="352" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1fomv8u_di" bpmnElement="Flow_1fomv8u"><omgdi:waypoint x="350" y="510" /><omgdi:waypoint x="400" y="510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1igym4c_di" bpmnElement="Flow_1igym4c"><omgdi:waypoint x="820" y="485" /><omgdi:waypoint x="820" y="430" /><omgdi:waypoint x="170" y="430" /><omgdi:waypoint x="170" y="485" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1gantfx_di" bpmnElement="Flow_1gantfx"><omgdi:waypoint x="195" y="510" /><omgdi:waypoint x="250" y="510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1wshq6n_di" bpmnElement="Flow_1wshq6n"><omgdi:waypoint x="1010" y="250" /><omgdi:waypoint x="1072" y="250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0mjhkzu_di" bpmnElement="Flow_0mjhkzu"><omgdi:waypoint x="625" y="250" /><omgdi:waypoint x="845" y="250" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0kej2j6_di" bpmnElement="Flow_0kej2j6"><omgdi:waypoint x="845" y="510" /><omgdi:waypoint x="870" y="510" /><omgdi:waypoint x="870" y="275" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0iip3cs_di" bpmnElement="Flow_0iip3cs"><omgdi:waypoint x="660" y="510" /><omgdi:waypoint x="712" y="510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_1mfwqzd_di" bpmnElement="Flow_1mfwqzd"><omgdi:waypoint x="748" y="510" /><omgdi:waypoint x="795" y="510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_0a7uqfw_di" bpmnElement="Flow_0a7uqfw"><omgdi:waypoint x="500" y="510" /><omgdi:waypoint x="560" y="510" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="Flow_014hs7c_di" bpmnElement="Flow_014hs7c"><omgdi:waypoint x="895" y="250" /><omgdi:waypoint x="910" y="250" /></bpmndi:BPMNEdge><bpmndi:BPMNShape id="StartEvent_1y45yut_di" bpmnElement="StartEvent_1y45yut"><omgdc:Bounds x="-38" y="232" width="36" height="36" /><bpmndi:BPMNLabel><omgdc:Bounds x="-31" y="275" width="23" height="14" /></bpmndi:BPMNLabel></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0jx4rgi_di" bpmnElement="EnterSaldo"><omgdc:Bounds x="250" y="210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0d2s6pw_di" bpmnElement="Gateway_0d2s6pw" isMarkerVisible="true"><omgdc:Bounds x="145" y="225" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1mw9fkh_di" bpmnElement="Gateway_1n4z68j"><omgdc:Bounds x="35" y="225" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1fwl3ca_di" bpmnElement="Gateway_1fwl3ca" isMarkerVisible="true"><omgdc:Bounds x="145" y="485" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1ftj738_di" bpmnElement="Activity_1ftj738"><omgdc:Bounds x="250" y="470" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_13ekgcb_di" bpmnElement="Event_13ekgcb"><omgdc:Bounds x="272" y="352" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1pgjke1_di" bpmnElement="Gateway_1pgjke1" isMarkerVisible="true"><omgdc:Bounds x="575" y="225" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0bemm73_di" bpmnElement="ReturnSaldo"><omgdc:Bounds x="560" y="470" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1j2fgrj_di" bpmnElement="Event_04tyeib"><omgdc:Bounds x="712" y="492" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_0y92pay_di" bpmnElement="Gateway_0y92pay" isMarkerVisible="true"><omgdc:Bounds x="795" y="485" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_1yfnagg_di" bpmnElement="Activity_1yfnagg"><omgdc:Bounds x="400" y="470" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Gateway_1g7njr2_di" bpmnElement="Gateway_1g7njr2" isMarkerVisible="true"><omgdc:Bounds x="845" y="225" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Activity_0bcidqk_di" bpmnElement="Result"><omgdc:Bounds x="910" y="210" width="100" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_0sk8619_di" bpmnElement="EndEvent_0sk8619"><omgdc:Bounds x="1072" y="232" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="Event_1erpm34_di" bpmnElement="Event_1sw7467"><omgdc:Bounds x="272" y="272" width="36" height="36" /></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></definitions>